<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1, user-scalable=no" />
<title>Alphabet Quiz for Kids - Fun Learning</title>
<meta name="theme-color" content="#0984e3" />
<link rel="manifest" href="manifest.json" />
<style>
  @import url('https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&display=swap');

  * {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    background: #ffffff;
    font-family: 'Comic Neue', cursive, Arial, sans-serif;
    color: #2d3436;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    align-items: center;
    justify-content: center;
    padding: 20px;
  }

  h1 {
    font-size: 3rem;
    text-align: center;
    margin-bottom: 10px;
    color: #0984e3;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
  }

  #game-container {
    background: #fff;
    border-radius: 25px;
    box-shadow: 0 12px 30px rgba(0,0,0,0.1);
    width: 100%;
    max-width: 480px;
    padding: 25px 30px 40px 30px;
    text-align: center;
  }

  #question {
    font-size: 2rem;
    margin-bottom: 25px;
    color: #2d3436;
    min-height: 60px;
  }

  #options {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 18px;
    margin-bottom: 25px;
  }

  button.option-btn {
    background: #74b9ff;
    border: none;
    border-radius: 15px;
    padding: 16px 0;
    font-size: 1.75rem;
    font-weight: 700;
    color: #fff;
    cursor: pointer;
    box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15);
    transition: background-color 0.3s ease, transform 0.2s ease;
    user-select: none;
  }
  button.option-btn:hover {
    background-color: #0984e3;
    transform: scale(1.05);
  }
  button.option-btn.correct {
    background-color: #00b894;
    box-shadow: 0 6px 20px rgba(0, 184, 148, 0.7);
  }
  button.option-btn.incorrect {
    background-color: #d63031;
    box-shadow: 0 6px 20px rgba(214, 48, 49, 0.7);
  }
  button.option-btn:disabled {
    cursor: default;
    pointer-events: none;
  }

  #feedback {
    font-size: 1.4rem;
    min-height: 30px;
    margin-bottom: 20px;
    font-weight: 600;
    color: #2d3436;
  }

  #next-btn {
    background-color: #fd79a8;
    border: none;
    padding: 15px 35px;
    font-size: 1.6rem;
    border-radius: 20px;
    color: white;
    font-weight: 700;
    cursor: pointer;
    box-shadow: 0 6px 15px rgba(253, 121, 168, 0.5);
    transition: background-color 0.3s ease, transform 0.2s ease;
    user-select: none;
    display: none;
    margin: 0 auto;
  }
  #next-btn:hover {
    background-color: #d6306e;
    transform: scale(1.07);
  }

  #scoreboard {
    margin-top: 30px;
    font-size: 1.3rem;
    color: #2d3436;
  }

  /* Fun bouncing animation for correct answers */
  @keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-12px); }
  }
  .bounce {
    animation: bounce 0.6s ease;
  }

  @media (max-width: 520px) {
    #game-container {
      padding: 20px;
    }
    button.option-btn {
      font-size: 1.4rem;
      padding: 12px 0;
    }
    #question {
      font-size: 1.6rem;
    }
    #next-btn {
      font-size: 1.3rem;
      padding: 12px 30px;
    }
  }
</style>
</head>
<body>
  <h1>Alphabet Fun Quiz!</h1>
  <div id="game-container" role="main" aria-live="polite">
    <div id="question" aria-label="Question area">Loading...</div>
    <div id="options" role="list"></div>
    <div id="feedback" aria-live="assertive"></div>
    <button id="next-btn" aria-label="Next question button">Next</button>
    <div id="scoreboard" aria-live="polite"></div>
  </div>

  <audio id="correct-sound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg" preload="auto"></audio>
  <audio id="wrong-sound" src="https://actions.google.com/sounds/v1/cartoon/cartoon_boing.ogg" preload="auto"></audio>

<script>
  (function() {
    const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
    let currentQuestion = null;
    let score = 0;
    let totalQuestions = 0;
    let backgroundUtterance;
    let backgroundSpeaking = false;

    const questionEl = document.getElementById('question');
    const optionsEl = document.getElementById('options');
    const feedbackEl = document.getElementById('feedback');
    const nextBtn = document.getElementById('next-btn');
    const scoreboardEl = document.getElementById('scoreboard');
    const correctSound = document.getElementById('correct-sound');
    const wrongSound = document.getElementById('wrong-sound');

    // Start peaceful background voice using Web Speech API
    function startBackgroundVoice() {
      if (!('speechSynthesis' in window)) return; // Not supported
      if(backgroundSpeaking) return;

      backgroundSpeaking = true;
      backgroundUtterance = new SpeechSynthesisUtterance("Let's learn the alphabets slowly and have fun!");
      backgroundUtterance.lang = 'en-US';
      backgroundUtterance.rate = 0.7; // Slow speaking
      backgroundUtterance.volume = 0.15; // Low volume
      backgroundUtterance.pitch = 0.8;

      backgroundUtterance.onend = () => {
        // Repeat with a delay of 3 seconds
        setTimeout(() => {
          if(backgroundSpeaking) {
            window.speechSynthesis.speak(backgroundUtterance);
          }
        }, 3000);
      };

      window.speechSynthesis.speak(backgroundUtterance);
    }

    // Stop the background voice
    function stopBackgroundVoice() {
      if (!('speechSynthesis' in window)) return;
      backgroundSpeaking = false;
      window.speechSynthesis.cancel();
    }

    function playCorrectSound() {
      correctSound.currentTime = 0;
      correctSound.play();
    }

    function playWrongSound() {
      wrongSound.currentTime = 0;
      wrongSound.play();
    }

    // Generate a question object with correct answer and 3 wrong options
    function generateQuestion() {
      // Pick a random letter which has a next letter (A-Y)
      let letterIndex = Math.floor(Math.random() * (alphabet.length - 1));
      let letter = alphabet[letterIndex];
      let correctAnswer = alphabet[letterIndex + 1];

      // Prepare options with correct answer and 3 distractors
      let options = new Set();
      options.add(correctAnswer);
      while(options.size < 4) {
        let randomLetter = alphabet[Math.floor(Math.random() * alphabet.length)];
        if(randomLetter !== correctAnswer && randomLetter !== letter) {
          options.add(randomLetter);
        }
      }

      // Shuffle options
      options = Array.from(options);
      for (let i = options.length -1; i > 0; i--) {
        let j = Math.floor(Math.random() * (i + 1));
        [options[i], options[j]] = [options[j], options[i]];
      }

      return {
        letter,
        questionText: `What comes after the letter <span aria-label="letter">${letter}</span>?`,
        correctAnswer,
        options
      };
    }

    function resetState() {
      feedbackEl.textContent = '';
      nextBtn.style.display = 'none';
      optionsEl.innerHTML = '';
    }

    function updateScoreboard() {
      scoreboardEl.textContent = `Score: ${score} / ${totalQuestions}`;
    }

    function handleOptionClick(e) {
      const selectedBtn = e.target;
      const selectedAnswer = selectedBtn.dataset.letter;

      // Disable all buttons after selection
      Array.from(optionsEl.children).forEach(btn => {
        btn.disabled = true;
        if (btn.dataset.letter === currentQuestion.correctAnswer) {
          btn.classList.add('correct', 'bounce');
        }
      });

      if(selectedAnswer === currentQuestion.correctAnswer) {
        feedbackEl.textContent = "Good job! That's correct ðŸŽ‰";
        selectedBtn.classList.add('correct', 'bounce');
        score++;
        playCorrectSound();
      } else {
        feedbackEl.textContent = `Oops! The correct answer is "${currentQuestion.correctAnswer}"`;
        selectedBtn.classList.add('incorrect');
        playWrongSound();
      }
      totalQuestions++;
      updateScoreboard();
      nextBtn.style.display = 'inline-block';
    }

    function showQuestion() {
      resetState();
      currentQuestion = generateQuestion();
      questionEl.innerHTML = currentQuestion.questionText;

      currentQuestion.options.forEach(letterOpt => {
        const btn = document.createElement('button');
        btn.classList.add('option-btn');
        btn.textContent = letterOpt;
        btn.setAttribute('data-letter', letterOpt);
        btn.setAttribute('role', 'listitem');
        btn.setAttribute('aria-label', `Option ${letterOpt}`);
        btn.addEventListener('click', handleOptionClick);
        optionsEl.appendChild(btn);
      });
    }

    nextBtn.addEventListener('click', () => {
      showQuestion();
    });

    // Start peaceful background voice on load
    window.addEventListener('load', () => {
      showQuestion();
      startBackgroundVoice();
    });

    // Stop background voice when page is hidden to avoid annoyance
    document.addEventListener('visibilitychange', () => {
      if(document.hidden) {
        stopBackgroundVoice();
      } else {
        startBackgroundVoice();
      }
    });

    // PWA Service Worker registration
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js')
          .then(() => {
            console.log('Service Worker registered');
          })
          .catch(err => {
            console.log('Service Worker registration failed:', err);
          });
      });
    }
  })();
</script>
</body>
</html>

